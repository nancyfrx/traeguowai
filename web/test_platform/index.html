<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basik Dashboard - Test Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#111111', // Black for premium look
                        secondary: '#666666',
                        dark: '#0a0a0a',
                        'dark-sidebar': '#111111',
                        'dark-header': '#161616',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 4px;
            height: 4px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #e2e8f0;
            border-radius: 2px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #cbd5e0;
        }
        .glass-btn {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .glass-btn:hover {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.04);
            transform: translateY(-1px);
        }
        .glass-btn:active {
            transform: translateY(0);
        }
        .sidebar-item {
            position: relative;
        }
        .sidebar-item.active {
            color: #111111;
            font-weight: 600;
        }
        .sidebar-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 20px;
            background-color: #111111;
            border-radius: 0 4px 4px 0;
        }
        .card-hover {
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
        }
        .card-hover:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.05), 0 10px 10px -5px rgba(0, 0, 0, 0.02);
            transform: translateY(-2px);
            border-color: rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-[#fcfcfc] text-gray-800 h-screen flex overflow-hidden">

    <!-- Sidebar -->
    <aside class="w-64 bg-white border-r border-gray-100 flex flex-col transition-all duration-300 z-20 hidden md:flex" id="sidebar">
        <!-- Logo -->
        <div class="h-20 flex items-center px-8">
            <div class="flex items-center gap-3 font-bold text-xl tracking-tight text-gray-900">
                <div class="w-9 h-9 bg-black rounded-xl flex items-center justify-center text-white shadow-lg shadow-gray-200">
                    <i data-lucide="layers" class="w-5 h-5"></i>
                </div>
                Basik
            </div>
        </div>

        <!-- Nav -->
        <nav class="flex-1 overflow-y-auto py-6">
            <div class="px-8 mb-3 text-[11px] font-bold text-gray-400 uppercase tracking-widest">Dashboard</div>
            
            <a href="#" onclick="switchTab('dashboard')" class="sidebar-item active flex items-center gap-4 px-8 py-3.5 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors">
                <i data-lucide="layout-dashboard" class="w-4 h-4"></i>
                概览
            </a>
            
            <a href="#" onclick="switchTab('test-platform')" class="sidebar-item flex items-center gap-4 px-8 py-3.5 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors">
                <i data-lucide="test-tube" class="w-4 h-4"></i>
                测试平台
                <span class="ml-auto bg-gray-100 text-gray-600 py-0.5 px-2 rounded-md text-[10px] font-bold border border-gray-200">NEW</span>
            </a>

            <div class="px-8 mt-8 mb-3 text-[11px] font-bold text-gray-400 uppercase tracking-widest">Apps</div>
            
            <a href="#" class="sidebar-item flex items-center gap-4 px-8 py-3.5 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors">
                <i data-lucide="message-square" class="w-4 h-4"></i>
                消息
            </a>
            <a href="#" class="sidebar-item flex items-center gap-4 px-8 py-3.5 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors">
                <i data-lucide="users" class="w-4 h-4"></i>
                用户管理
            </a>
            <a href="#" class="sidebar-item flex items-center gap-4 px-8 py-3.5 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors">
                <i data-lucide="calendar" class="w-4 h-4"></i>
                日历
            </a>

            <div class="px-8 mt-8 mb-3 text-[11px] font-bold text-gray-400 uppercase tracking-widest">Web</div>
            <a href="/art/" target="_blank" class="sidebar-item flex items-center gap-4 px-8 py-3.5 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors">
                <i data-lucide="globe" class="w-4 h-4"></i>
                艺术市场 (Blog)
            </a>

            <div class="px-8 mt-8 mb-3 text-[11px] font-bold text-gray-400 uppercase tracking-widest">UI Elements</div>
             <a href="#" class="sidebar-item flex items-center gap-4 px-8 py-3.5 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors">
                <i data-lucide="component" class="w-4 h-4"></i>
                组件
            </a>
        </nav>

        <!-- User Profile Bottom -->
        <div class="p-6 border-t border-gray-50">
            <div class="flex items-center gap-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors border border-transparent hover:border-gray-100">
                <img src="https://ui-avatars.com/api/?name=Feng+Ruxue&background=000000&color=ffffff" class="w-9 h-9 rounded-full ring-2 ring-gray-100" alt="User">
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-semibold text-gray-900 truncate">Feng Ruxue</p>
                    <p class="text-[11px] text-gray-400 truncate uppercase tracking-wider font-medium">Admin</p>
                </div>
                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-300"></i>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col h-screen overflow-hidden bg-[#fcfcfc]">
        <!-- Header -->
        <header class="h-20 flex items-center justify-between px-8 z-10">
            <div class="flex items-center gap-6">
                <button class="md:hidden text-gray-500 hover:text-gray-900 transition-colors" onclick="document.getElementById('sidebar').classList.toggle('hidden')">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
                <div class="relative hidden sm:block group">
                    <i data-lucide="search" class="w-4 h-4 absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-hover:text-gray-600 transition-colors"></i>
                    <input type="text" placeholder="Type to search..." class="pl-11 pr-4 py-2.5 bg-gray-50 border-none rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-gray-100 w-64 transition-all placeholder-gray-400 text-gray-700">
                </div>
            </div>

            <div class="flex items-center gap-4">
                <button class="glass-btn p-2.5 rounded-full relative text-gray-500 hover:text-black">
                    <i data-lucide="bell" class="w-5 h-5"></i>
                    <span class="absolute top-2.5 right-3 w-2 h-2 bg-black rounded-full border-2 border-white"></span>
                </button>
                <button onclick="toggleDarkMode()" class="glass-btn p-2.5 rounded-full text-gray-500 hover:text-black" title="Switch Theme">
                    <i data-lucide="moon" class="w-5 h-5"></i>
                </button>
            </div>
        </header>

        <!-- Main Scroll Area -->
        <main class="flex-1 overflow-y-auto px-8 pb-8" id="main-content">
            
            <!-- Dashboard View -->
            <div id="view-dashboard" class="space-y-8 max-w-7xl mx-auto pt-4">
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Card 1 -->
                    <div class="bg-white p-6 rounded-2xl card-hover">
                        <div class="flex justify-between items-start mb-4">
                            <div class="p-3 bg-gray-50 rounded-xl">
                                <i data-lucide="users" class="w-5 h-5 text-gray-700"></i>
                            </div>
                            <span class="flex items-center text-xs font-semibold text-green-600 bg-green-50 px-2 py-1 rounded-md">
                                <i data-lucide="arrow-up-right" class="w-3 h-3 mr-1"></i>
                                12%
                            </span>
                        </div>
                        <div>
                            <h3 class="text-3xl font-bold text-gray-900 tracking-tight">12,345</h3>
                            <p class="text-sm font-medium text-gray-400 mt-1">Total Users</p>
                        </div>
                    </div>

                    <!-- Card 2 -->
                    <div class="bg-white p-6 rounded-2xl card-hover">
                        <div class="flex justify-between items-start mb-4">
                            <div class="p-3 bg-gray-50 rounded-xl">
                                <i data-lucide="activity" class="w-5 h-5 text-gray-700"></i>
                            </div>
                            <span class="flex items-center text-xs font-semibold text-green-600 bg-green-50 px-2 py-1 rounded-md">
                                <i data-lucide="arrow-up-right" class="w-3 h-3 mr-1"></i>
                                5.2%
                            </span>
                        </div>
                        <div>
                            <h3 class="text-3xl font-bold text-gray-900 tracking-tight">8,542</h3>
                            <p class="text-sm font-medium text-gray-400 mt-1">Active Sessions</p>
                        </div>
                    </div>

                    <!-- Card 3 -->
                    <div class="bg-white p-6 rounded-2xl card-hover">
                        <div class="flex justify-between items-start mb-4">
                            <div class="p-3 bg-gray-50 rounded-xl">
                                <i data-lucide="dollar-sign" class="w-5 h-5 text-gray-700"></i>
                            </div>
                            <span class="flex items-center text-xs font-semibold text-red-600 bg-red-50 px-2 py-1 rounded-md">
                                <i data-lucide="arrow-down-right" class="w-3 h-3 mr-1"></i>
                                2.4%
                            </span>
                        </div>
                        <div>
                            <h3 class="text-3xl font-bold text-gray-900 tracking-tight">$45,231</h3>
                            <p class="text-sm font-medium text-gray-400 mt-1">Total Revenue</p>
                        </div>
                    </div>

                    <!-- Card 4 -->
                    <div class="bg-white p-6 rounded-2xl card-hover">
                        <div class="flex justify-between items-start mb-4">
                            <div class="p-3 bg-gray-50 rounded-xl">
                                <i data-lucide="check-circle" class="w-5 h-5 text-gray-700"></i>
                            </div>
                            <span class="flex items-center text-xs font-semibold text-green-600 bg-green-50 px-2 py-1 rounded-md">
                                <i data-lucide="arrow-up-right" class="w-3 h-3 mr-1"></i>
                                1.2%
                            </span>
                        </div>
                        <div>
                            <h3 class="text-3xl font-bold text-gray-900 tracking-tight">98.5%</h3>
                            <p class="text-sm font-medium text-gray-400 mt-1">Task Completion</p>
                        </div>
                    </div>
                </div>

                <!-- Charts Section (Placeholder) -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2 bg-white p-8 rounded-2xl card-hover">
                        <div class="flex justify-between items-center mb-8">
                            <div>
                                <h3 class="font-bold text-lg text-gray-900">Traffic Analysis</h3>
                                <p class="text-sm text-gray-400 mt-1">Overview of visitor behavior</p>
                            </div>
                            <button class="glass-btn px-4 py-2 rounded-lg text-xs font-semibold text-gray-600">Download Report</button>
                        </div>
                        <div class="h-72 bg-gray-50 rounded-xl flex items-center justify-center text-gray-400 border border-dashed border-gray-200">
                            <div class="text-center">
                                <i data-lucide="bar-chart-2" class="w-10 h-10 mx-auto mb-2 opacity-20"></i>
                                <span class="text-sm">Chart Visualization Area</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-8 rounded-2xl card-hover">
                        <div class="flex justify-between items-center mb-8">
                            <h3 class="font-bold text-lg text-gray-900">Devices</h3>
                            <button class="text-gray-400 hover:text-gray-600"><i data-lucide="more-horizontal" class="w-5 h-5"></i></button>
                        </div>
                        <div class="h-72 bg-gray-50 rounded-xl flex items-center justify-center text-gray-400 border border-dashed border-gray-200">
                             <div class="text-center">
                                <i data-lucide="pie-chart" class="w-10 h-10 mx-auto mb-2 opacity-20"></i>
                                <span class="text-sm">Pie Chart Area</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity Table -->
                <div class="bg-white rounded-2xl card-hover overflow-hidden">
                    <div class="p-8 border-b border-gray-50 flex justify-between items-center">
                        <div>
                            <h3 class="font-bold text-lg text-gray-900">Project Status</h3>
                            <p class="text-sm text-gray-400 mt-1">Recent updates and progress</p>
                        </div>
                        <button class="glass-btn px-4 py-2 rounded-lg text-xs font-semibold text-gray-600 flex items-center gap-2">
                            <i data-lucide="filter" class="w-3 h-3"></i> Filter
                        </button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm text-gray-600">
                            <thead class="bg-gray-50/50 text-xs uppercase font-bold text-gray-400 tracking-wider">
                                <tr>
                                    <th class="px-8 py-5">Project</th>
                                    <th class="px-8 py-5">Manager</th>
                                    <th class="px-8 py-5">Status</th>
                                    <th class="px-8 py-5">Progress</th>
                                    <th class="px-8 py-5 text-right">Action</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-50">
                                <tr class="hover:bg-gray-50/50 transition-colors group">
                                    <td class="px-8 py-5 font-semibold text-gray-900">Basik Dashboard UI</td>
                                    <td class="px-8 py-5 flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-[10px] font-bold text-gray-600 border border-gray-200">FR</div>
                                        <span class="text-gray-700">Feng Ruxue</span>
                                    </td>
                                    <td class="px-8 py-5"><span class="px-2.5 py-1 rounded-md text-[11px] font-bold bg-gray-100 text-gray-600 border border-gray-200">IN PROGRESS</span></td>
                                    <td class="px-8 py-5">
                                        <div class="w-32 h-1.5 bg-gray-100 rounded-full overflow-hidden">
                                            <div class="h-full bg-black w-3/4 rounded-full"></div>
                                        </div>
                                    </td>
                                    <td class="px-8 py-5 text-right">
                                        <button class="text-gray-400 hover:text-black transition-colors p-1 rounded hover:bg-gray-100 opacity-0 group-hover:opacity-100">
                                            <i data-lucide="more-horizontal" class="w-4 h-4"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50/50 transition-colors group">
                                    <td class="px-8 py-5 font-semibold text-gray-900">AI Test Integration</td>
                                    <td class="px-8 py-5 flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-full bg-black text-white flex items-center justify-center text-[10px] font-bold">AI</div>
                                        <span class="text-gray-700">System</span>
                                    </td>
                                    <td class="px-8 py-5"><span class="px-2.5 py-1 rounded-md text-[11px] font-bold bg-black text-white">COMPLETED</span></td>
                                    <td class="px-8 py-5">
                                        <div class="w-32 h-1.5 bg-gray-100 rounded-full overflow-hidden">
                                            <div class="h-full bg-black w-full rounded-full"></div>
                                        </div>
                                    </td>
                                    <td class="px-8 py-5 text-right">
                                        <button class="text-gray-400 hover:text-black transition-colors p-1 rounded hover:bg-gray-100 opacity-0 group-hover:opacity-100">
                                            <i data-lucide="more-horizontal" class="w-4 h-4"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Test Platform View (Integrated) -->
            <div id="view-test-platform" class="hidden space-y-8 max-w-7xl mx-auto pt-4">
                <!-- Status Check Section -->
                <div class="bg-white p-8 rounded-2xl card-hover">
                    <h3 class="font-bold text-lg text-gray-900 mb-6 flex items-center gap-3">
                        <div class="p-2 bg-gray-50 rounded-lg">
                            <i data-lucide="activity" class="w-5 h-5 text-black"></i>
                        </div>
                        System Status
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <button onclick="checkStatus('backend')" class="glass-btn p-5 rounded-xl text-left group hover:border-black/10">
                            <div class="text-xs font-bold text-gray-400 mb-2 uppercase tracking-wider">Backend</div>
                            <div class="font-bold text-gray-900 group-hover:text-black flex items-center justify-between">
                                Connection
                                <i data-lucide="arrow-right" class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-all transform -translate-x-2 group-hover:translate-x-0"></i>
                            </div>
                            <div id="status-backend" class="mt-3 text-xs text-gray-400 font-medium">Waiting...</div>
                        </button>
                        <button onclick="checkStatus('https')" class="glass-btn p-5 rounded-xl text-left group hover:border-black/10">
                            <div class="text-xs font-bold text-gray-400 mb-2 uppercase tracking-wider">Security</div>
                            <div class="font-bold text-gray-900 group-hover:text-black flex items-center justify-between">
                                SSL/TLS
                                <i data-lucide="shield-check" class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-all transform -translate-x-2 group-hover:translate-x-0"></i>
                            </div>
                            <div id="status-https" class="mt-3 text-xs text-gray-400 font-medium">Waiting...</div>
                        </button>
                        <button onclick="testArtImages()" class="glass-btn p-5 rounded-xl text-left group hover:border-black/10">
                            <div class="text-xs font-bold text-gray-400 mb-2 uppercase tracking-wider">Assets</div>
                            <div class="font-bold text-gray-900 group-hover:text-black flex items-center justify-between">
                                Static Paths
                                <i data-lucide="image" class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-all transform -translate-x-2 group-hover:translate-x-0"></i>
                            </div>
                            <div id="status-art" class="mt-3 text-xs text-gray-400 font-medium">Waiting...</div>
                        </button>
                         <button onclick="checkStatus('database')" class="glass-btn p-5 rounded-xl text-left group hover:border-black/10">
                            <div class="text-xs font-bold text-gray-400 mb-2 uppercase tracking-wider">Data</div>
                            <div class="font-bold text-gray-900 group-hover:text-black flex items-center justify-between">
                                Database
                                <i data-lucide="database" class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-all transform -translate-x-2 group-hover:translate-x-0"></i>
                            </div>
                            <div id="status-database" class="mt-3 text-xs text-gray-400 font-medium">Waiting...</div>
                        </button>
                    </div>
                </div>

                <!-- AI Test Generator -->
                <div class="bg-white rounded-2xl card-hover overflow-hidden flex flex-col md:flex-row min-h-[600px]">
                    <!-- Input Area -->
                    <div class="w-full md:w-1/3 p-8 border-b md:border-b-0 md:border-r border-gray-100 bg-gray-50/50">
                        <h3 class="font-bold text-lg text-gray-900 mb-2 flex items-center gap-3">
                            <div class="p-2 bg-black rounded-lg text-white">
                                <i data-lucide="sparkles" class="w-4 h-4"></i>
                            </div>
                            AI Generator
                        </h3>
                        <p class="text-sm text-gray-500 mb-8 leading-relaxed">Powered by GLM-4. Generate comprehensive test scenarios from simple descriptions.</p>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-xs font-bold text-gray-900 uppercase tracking-wider mb-2">Requirement Description</label>
                                <textarea id="requirementInput" class="w-full h-80 p-4 rounded-xl border-0 bg-white shadow-sm ring-1 ring-gray-200 text-sm focus:ring-2 focus:ring-black/10 resize-none transition-shadow" placeholder="e.g. User registration flow including phone verification, password strength check, and error handling..."></textarea>
                            </div>
                            <button onclick="generateTestCases()" id="generateBtn" class="w-full py-3 bg-black text-white rounded-xl font-bold hover:bg-gray-800 transition-all shadow-lg shadow-gray-200 active:transform active:scale-[0.98] flex items-center justify-center gap-2">
                                <i data-lucide="zap" class="w-4 h-4"></i>
                                Generate Cases
                            </button>
                        </div>
                    </div>

                    <!-- Output Area -->
                    <div class="w-full md:w-2/3 p-8 flex flex-col bg-white">
                         <div class="flex justify-between items-center mb-6">
                            <h3 class="font-bold text-lg text-gray-900">Results</h3>
                            <div class="flex gap-3">
                                <button onclick="copyResults()" class="glass-btn px-4 py-2 rounded-lg text-xs font-bold text-gray-600 flex items-center gap-2 hover:text-black">
                                    <i data-lucide="copy" class="w-3 h-3"></i> Copy
                                </button>
                                <button onclick="document.getElementById('testCaseOutput').innerHTML = '<div class=\'text-gray-300 text-sm text-center mt-32\'>Waiting for input...</div>'" class="glass-btn px-4 py-2 rounded-lg text-xs font-bold text-gray-600 flex items-center gap-2 hover:text-red-600">
                                    <i data-lucide="trash-2" class="w-3 h-3"></i> Clear
                                </button>
                            </div>
                        </div>
                        <div id="testCaseOutput" class="flex-1 bg-gray-50/50 border border-dashed border-gray-200 rounded-xl p-6 overflow-y-auto text-sm leading-7 text-gray-700 font-mono">
                            <div class="h-full flex flex-col items-center justify-center text-gray-300">
                                <i data-lucide="file-text" class="w-16 h-16 mb-4 opacity-20"></i>
                                <p class="font-medium">Enter requirements to start</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // Dark Mode Logic
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            const isDark = document.documentElement.classList.contains('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            
            // Update icon
            const btn = document.querySelector('button[onclick="toggleDarkMode()"] i');
            if (btn) {
                btn.setAttribute('data-lucide', isDark ? 'sun' : 'moon');
                lucide.createIcons();
            }
        }

        // Check saved theme
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        }

        // Tab Switching Logic
        function switchTab(tabId) {
            // Update Sidebar Active State
            document.querySelectorAll('.sidebar-item').forEach(el => {
                el.classList.remove('active');
                if (el.getAttribute('onclick') && el.getAttribute('onclick').includes(tabId)) {
                    el.classList.add('active');
                }
            });

            // Update View Visibility
            document.getElementById('view-dashboard').classList.add('hidden');
            document.getElementById('view-test-platform').classList.add('hidden');
            
            document.getElementById(`view-${tabId}`).classList.remove('hidden');
        }

        // --- Original Test Platform Logic (Integrated) ---

        function log(message, type = 'info', targetId) {
            const el = document.getElementById(targetId);
            if (!el) return;
            
            let colorClass = 'text-gray-400';
            let icon = '';
            
            if (type === 'success') {
                colorClass = 'text-green-600 font-bold';
                icon = '✓ ';
            } else if (type === 'error') {
                colorClass = 'text-red-600 font-bold';
                icon = '✕ ';
            } else if (type === 'loading') {
                colorClass = 'text-gray-800 font-bold';
                icon = '⟳ ';
            }

            el.innerHTML = `<span class="${colorClass}">${icon}${message}</span>`;
        }

        async function checkStatus(type) {
            const statusElId = `status-${type}`;
            log('Checking...', 'loading', statusElId);

            try {
                if (type === 'backend') {
                    // Mock check
                    setTimeout(() => log('No Response (Port 8080)', 'error', statusElId), 1000);
                } else if (type === 'https') {
                    if (window.location.protocol === 'https:') {
                        log('Secure (HTTPS)', 'success', statusElId);
                    } else {
                        log('Insecure (HTTP)', 'error', statusElId);
                    }
                } else if (type === 'database') {
                     setTimeout(() => log('Connected (12ms)', 'success', statusElId), 800);
                }
            } catch (e) {
                log('Failed', 'error', statusElId);
            }
        }

        async function testArtImages() {
            const statusElId = 'status-art';
            log('Verifying...', 'loading', statusElId);
            
            const testImg = new Image();
            testImg.onload = () => log('Path Valid', 'success', statusElId);
            testImg.onerror = () => log('Not Found (404)', 'error', statusElId);
            testImg.src = '/art/assets/index-BCYEWQYd.css'; // Using the CSS file as a probe
        }

        // AI Generation Logic (Kept from previous version)
        async function generateTestCases() {
            const requirement = document.getElementById('requirementInput').value;
            if (!requirement.trim()) {
                alert('Please enter requirement description');
                return;
            }

            const btn = document.getElementById('generateBtn');
            const output = document.getElementById('testCaseOutput');
            
            btn.disabled = true;
            btn.innerHTML = '<i data-lucide="loader-2" class="w-4 h-4 animate-spin"></i> Generating...';
            output.innerHTML = '<div class="space-y-4 animate-pulse pt-10"><div class="h-4 bg-gray-100 rounded w-3/4 mx-auto"></div><div class="h-4 bg-gray-100 rounded w-1/2 mx-auto"></div><div class="h-4 bg-gray-100 rounded w-5/6 mx-auto"></div></div>';

            try {
                const token = await generateToken("23204924195156455ee147659695034a.bl5S3g0x7wY5X5X1");
                
                const response = await fetch("https://open.bigmodel.cn/api/paas/v4/chat/completions", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": "Bearer " + token
                    },
                    body: JSON.stringify({
                        model: "glm-4",
                        messages: [
                            {
                                role: "system",
                                content: "You are a Senior QA Engineer. Generate a comprehensive test case list based on the user's requirements. Format: Test Module, Test Point, Pre-conditions, Steps, Expected Result. Output in clean Markdown."
                            },
                            {
                                role: "user",
                                content: requirement
                            }
                        ]
                    })
                });

                const data = await response.json();
                if (data.choices && data.choices[0].message) {
                    const content = data.choices[0].message.content;
                    // Simple Markdown to HTML conversion for display
                    const htmlContent = content
                        .replace(/^### (.*$)/gim, '<h3 class="font-bold text-lg mt-6 mb-3 text-gray-900 border-b border-gray-100 pb-2">$1</h3>')
                        .replace(/^## (.*$)/gim, '<h2 class="font-bold text-xl mt-8 mb-4 text-black">$1</h2>')
                        .replace(/^\- (.*$)/gim, '<li class="ml-4 list-disc text-gray-600 mb-1">$1</li>')
                        .replace(/\*\*(.*)\*\*/gim, '<strong class="text-gray-900">$1</strong>')
                        .replace(/\n/gim, '<br>');
                    
                    output.innerHTML = htmlContent;
                } else {
                    output.innerHTML = '<span class="text-red-500 font-bold">API Error</span>';
                }

            } catch (error) {
                console.error(error);
                output.innerHTML = `<span class="text-red-500 font-bold">Network Error: ${error.message}</span>`;
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<i data-lucide="zap" class="w-4 h-4"></i> Generate Cases';
                lucide.createIcons(); // Re-render icons
            }
        }

        // JWT Token Generation (Same as before)
        async function generateToken(apiKey) {
            const [id, secret] = apiKey.split('.');
            const header = { alg: 'HS256', sign_type: 'SIGN' };
            const payload = {
                api_key: id,
                exp: Date.now() + 3600 * 1000,
                timestamp: Date.now()
            };
            
            const base64UrlEncode = (obj) => {
                return btoa(JSON.stringify(obj))
                    .replace(/=/g, '')
                    .replace(/\+/g, '-')
                    .replace(/\//g, '_');
            };

            const unsignedToken = `${base64UrlEncode(header)}.${base64UrlEncode(payload)}`;
            const signature = CryptoJS.HmacSHA256(unsignedToken, secret);
            const base64Signature = CryptoJS.enc.Base64.stringify(signature)
                .replace(/=/g, '')
                .replace(/\+/g, '-')
                .replace(/\//g, '_');

            return `${unsignedToken}.${base64Signature}`;
        }

        function copyResults() {
            const content = document.getElementById('testCaseOutput').innerText;
            navigator.clipboard.writeText(content).then(() => {
                alert('Copied to clipboard');
            });
        }
    </script>
</body>
</html>
