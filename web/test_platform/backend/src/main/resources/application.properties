spring.application.name=testplatform
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# Logging Configuration
# 本地默认日志路径
logging.file.path=${LOG_PATH:./logs/test_platform}
# MyBatis 日志输出
logging.level.com.testplatform.backend=DEBUG
logging.level.com.testplatform.backend.repository=DEBUG
# Spring Boot 默认日志输出级别
logging.level.root=INFO
server.port=8081

# Database Configuration
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/test_platform_db?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true&maxAllowedPacket=134217728}
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:123456}

# MyBatis Configuration
mybatis.mapper-locations=classpath:mapper/*.xml
mybatis.type-aliases-package=com.testplatform.backend.entity
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl

# PageHelper
pagehelper.helperDialect=mysql
pagehelper.reasonable=true
pagehelper.supportMethodsArguments=true
pagehelper.params=count=countSql

# Security
# Disable default login screen
spring.security.user.name=user
spring.security.user.password=password

# Mail Configuration
spring.mail.host=${SMTP_HOST:smtp.163.com}
spring.mail.port=${SMTP_PORT:465}
spring.mail.username=${SMTP_USERNAME:fengruxue01@163.com}
spring.mail.password=${SMTP_PASSWORD:WR55xCjn4QfvFk9G}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.ssl.enable=true

# AI Configuration
ai.zhipu.api-key=${ZHIPU_API_KEY:00b08fee86f84b33a353f45b0b0f6c0f.tBYJiYISieVqrTjA}

spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# Servlet and MVC Configuration
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.add-mappings=false

# Redis Configuration - DISABLED
spring.data.redis.enabled=false
# spring.data.redis.host=${REDIS_HOST:localhost}
# spring.data.redis.port=${REDIS_PORT:6379}
# spring.data.redis.password=${REDIS_PASSWORD:}
# spring.data.redis.timeout=2000

# File Upload Configuration
spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=100MB
server.tomcat.max-http-form-post-size=100MB
server.tomcat.max-swallow-size=100MB

# Jackson Configuration for large JSON payloads
# Note: Max string length is configured in com.testplatform.backend.config.JacksonConfig
# to support large Base64 images in HTML (100MB)

# Aliyun OSS Configuration
aliyun.oss.endpoint=https://oss-cn-shenzhen.aliyuncs.com
aliyun.oss.accessKeyId=${OSS_ACCESS_KEY_ID:}
aliyun.oss.accessKeySecret=${OSS_ACCESS_KEY_SECRET:}
aliyun.oss.bucketName=fengruxue
# 使用 OSS 直接访问地址
aliyun.oss.baseUrl=https://fengruxue.oss-cn-shenzhen.aliyuncs.com/
aliyun.oss.prefix=testplatform/case/image/
