<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TraceGuowai é¡¹ç›®æ•´åˆå¹³å°</title>
    <script>
        // é¢„å…ˆæŠ‘åˆ¶ Tailwind Play CDN çš„ç”Ÿäº§ç¯å¢ƒè­¦å‘Š
        (function() {
            const isProd = window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1';
            if (isProd) {
                const originalWarn = console.warn;
                console.warn = function(...args) {
                    if (args[0] && typeof args[0] === 'string' && args[0].includes('cdn.tailwindcss.com')) {
                        return;
                    }
                    originalWarn.apply(console, args);
                };
            }
        })();
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    // è‡ªå®šä¹‰ä¸»é¢˜é…ç½®
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            overflow: hidden;
        }
        .sidebar-item {
            transition: all 0.2s ease;
        }
        .sidebar-item.active {
            background-color: rgba(37, 99, 235, 0.1);
            color: #2563eb;
        }
        .sidebar-item.active .project-name {
            color: #2563eb;
            font-weight: 600;
        }
        .category-header.expanded svg {
            transform: rotate(180deg);
        }
        .submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: #f9fafb;
        }
        .submenu.open {
            max-height: 1000px;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        /* Mobile View Styles */
        #viewport-container.mobile-mode {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #1f2937;
            padding: 2rem;
            perspective: 1000px;
        }
        #viewport-container.mobile-mode iframe {
            width: 375px;
            height: 812px;
            max-height: 100%;
            border-radius: 40px;
            box-shadow: 
                0 0 0 12px #111827,
                0 0 0 14px #374151,
                0 20px 50px rgba(0,0,0,0.5);
            margin: auto;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }
        .status-online { background-color: #10b981; }
        .status-offline { background-color: #9ca3af; }
    </style>
</head>
<body class="bg-gray-50 flex h-screen">

    <!-- Sidebar -->
    <aside class="w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm z-10">
        <div class="p-6 border-b border-gray-100">
            <h1 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                <span class="text-blue-600 text-2xl">ğŸš€</span>
                fengruxue
            </h1>
            <p class="text-xs text-gray-400 mt-1">é¡¹ç›®æ•´åˆç®¡ç†ä¸­å¿ƒ</p>
        </div>
        
        <nav class="flex-1 overflow-y-auto" id="sidebar">
            <!-- Project items will be injected here -->
        </nav>

        <div class="p-4 bg-gray-50 border-t border-gray-100">
            <div class="text-[10px] text-gray-400 uppercase tracking-wider font-semibold mb-2">ç³»ç»ŸçŠ¶æ€</div>
            <div class="space-y-2">
                <div class="flex items-center text-xs text-gray-600">
                    <span class="status-dot status-online"></span>
                    å¹³å°è¿è¡Œä¸­
                </div>
                <div class="flex items-center text-xs text-gray-600">
                    <span class="status-dot status-online"></span>
                    å¤šçº§èœå•å·²å°±ç»ª
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col relative">
        <!-- Header / Toolbar -->
        <header class="h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6">
            <div class="flex items-center gap-3">
                <span id="current-project-icon" class="text-xl">ğŸ“</span>
                <div class="flex flex-col">
                    <div class="flex items-center gap-2">
                        <h2 id="current-project-name" class="font-semibold text-gray-700">è¯·é€‰æ‹©ä¸€ä¸ªé¡¹ç›®</h2>
                        <span id="project-type-tag" class="hidden px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-tight"></span>
                    </div>
                    <span id="current-project-path" class="text-[10px] text-gray-400 font-mono"></span>
                </div>
            </div>
            
            <div class="flex items-center gap-4">
                <div class="flex items-center bg-gray-100 rounded-lg p-1">
                    <button id="mobile-toggle-btn" class="p-1.5 hover:bg-white rounded-md transition-all text-gray-500 hover:text-blue-600" title="ç§»åŠ¨ç«¯è§†å›¾">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>
                    </button>
                    <div class="w-[1px] h-4 bg-gray-300 mx-0.5"></div>
                    <button id="refresh-btn" class="p-1.5 hover:bg-white rounded-md transition-all text-gray-500 hover:text-blue-600" title="åˆ·æ–°é¡¹ç›®">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/></svg>
                    </button>
                    <button id="open-new-tab" class="p-1.5 hover:bg-white rounded-md transition-all text-gray-500 hover:text-blue-600" title="åœ¨æ–°çª—å£æ‰“å¼€">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Viewport -->
        <div class="flex-1 bg-gray-100 relative overflow-hidden" id="viewport-container">
            <div id="welcome-screen" class="absolute inset-0 flex flex-col items-center justify-center text-gray-400 bg-white z-20">
                <div class="text-6xl mb-4">ğŸ›¸</div>
                <h3 class="text-xl font-medium text-gray-600">æ¬¢è¿ä½¿ç”¨ fengruxue é¡¹ç›®æ•´åˆå¹³å°</h3>
                <p class="mt-2 text-sm">æ”¯æŒå¤šçº§æ–‡ä»¶å¤¹è‡ªåŠ¨è¯†åˆ«ä¸å±•ç¤º</p>
                <div class="mt-8 grid grid-cols-2 gap-4 max-w-md">
                    <div class="p-4 border border-dashed border-gray-200 rounded-xl text-center">
                        <div class="text-blue-500 font-bold mb-1">å±‚çº§ç»“æ„</div>
                        <div class="text-[11px]">ä¸€çº§æ–‡ä»¶å¤¹ä¸ºèœå•åˆ†ç±»</div>
                    </div>
                    <div class="p-4 border border-dashed border-gray-200 rounded-xl text-center">
                        <div class="text-green-500 font-bold mb-1">è‡ªåŠ¨è¯†åˆ«</div>
                        <div class="text-[11px]">æ”¯æŒ Vite/Next.js/Static ç±»å‹</div>
                    </div>
                </div>
            </div>
            <iframe id="project-iframe" src="about:blank"></iframe>
        </div>
    </main>

    <script>
        // ç¯å¢ƒæ£€æµ‹ï¼šåˆ¤æ–­æ˜¯å¦åœ¨æœ¬åœ°è¿è¡Œ (localhost æˆ– file:// åè®®)
        const isLocal = window.location.hostname === 'localhost' || 
                       window.location.hostname === '127.0.0.1' || 
                       window.location.protocol === 'file:';
        const isProd = !isLocal;

        const menuData = [
            {
                name: 'AI_TOOL',
                icon: 'ğŸ› ï¸',
                children: [
                    { id: 'chat-gml', name: 'æ™ºè°± AI èŠå¤©', icon: 'ğŸ’¬', type: 'static', url: './AI_TOOL/chat-gml/', path: './AI_TOOL/chat-gml' },
                    { id: 'deepseek-chat', name: 'DeepSeek Chat', icon: 'ğŸ§ ', type: 'static', url: './AI_TOOL/deepseek-chat/', path: './AI_TOOL/deepseek-chat' }
                ]
            },
            {
                name: 'APP',
                icon: 'ğŸ“±',
                children: [
                    { id: 'qqmusic', name: 'QQéŸ³ä¹', icon: 'ğŸµ', type: 'vite', localUrl: 'http://localhost:3000', prodUrl: './app/qqmusic/index.html', path: './APP/QQMusic' },
                    { id: 'douyin', name: 'æŠ–éŸ³', icon: 'ğŸ“±', type: 'vite', localUrl: 'http://localhost:5173', prodUrl: './app/douyin/index.html', path: './APP/douyin' },
                    { id: 'amap-ranking', name: 'é«˜å¾·æ‰«è¡—', icon: 'ğŸ“', type: 'vite', localUrl: 'http://localhost:5177', prodUrl: './app/amap-ranking/index.html', path: './APP/amap-ranking' },
                    { id: 'wechat-clone', name: 'å¾®ä¿¡', icon: 'ğŸ’¬', type: 'static', url: './app/wechat-clone/', path: './APP/wechat-clone' },
                    { id: 'weixin', name: 'æ–°ç‰ˆå¾®ä¿¡', icon: 'ğŸ’¬', type: 'vite', localUrl: 'http://localhost:5179', prodUrl: './app/weixin/index.html', path: './APP/weixin' },
                    { id: 'blog', name: 'è‰ºæœ¯å¸‚åœº', icon: 'ğŸ¨', type: 'vite', localUrl: 'http://localhost:5175', prodUrl: './app/blog/index.html', path: './APP/blog/frontend' }
                ]
            },
            {
                name: 'GAME',
                icon: 'ğŸ®',
                children: [
                    { id: 'eluosi', name: 'ä¿„ç½—æ–¯æ–¹å—', icon: 'ğŸ§±', type: 'static', url: './game/eluosifangkuan/tetris.html', path: './game/eluosifangkuan' },
                    { id: 'feij', name: 'å¦å…‹å¤§æˆ˜é£æœº', icon: 'âœˆï¸', type: 'static', url: './game/feij/', path: './game/feij' },
                    { id: 'xiaoxiaole', name: 'æ¶ˆæ¶ˆä¹', icon: 'ğŸ’', type: 'static', url: './game/xiaoxiaole/', path: './game/xiaoxiaole' }
                ]
            },
            {
                name: 'OTHER',
                icon: 'ğŸ“‚',
                children: [
                    { id: 'animal', name: 'åŠ¨ç‰©ç™¾ç§‘', icon: 'ğŸ¾', type: 'static', url: './other/animal/', path: './other/animal' },
                    { id: 'china-map', name: 'ä¸­å›½åœ°å›¾', icon: 'ğŸ—ºï¸', type: 'static', url: './other/china_map/index.html', path: './other/china_map' },
                    { id: 'rili', name: 'ä¸‡å¹´å†', icon: 'ğŸ“…', type: 'vite', localUrl: 'http://localhost:5176', prodUrl: './other/rili/index.html', path: './other/rili' },
                    { id: 'docs', name: 'æŠ€æœ¯æ–‡æ¡£', icon: 'ğŸ“–', type: 'static', url: './other/docs.html', path: './other' }
                ]
            }
        ];

        // Process URLs based on environment
        menuData.forEach(cat => {
            cat.children.forEach(project => {
                if (project.type === 'vite') {
                    project.url = isProd ? project.prodUrl : project.localUrl;
                }
            });
        });

        const sidebar = document.getElementById('sidebar');
        const iframe = document.getElementById('project-iframe');
        const welcomeScreen = document.getElementById('welcome-screen');
        const currentProjectName = document.getElementById('current-project-name');
        const currentProjectIcon = document.getElementById('current-project-icon');
        const currentProjectPath = document.getElementById('current-project-path');
        const typeTag = document.getElementById('project-type-tag');
        const refreshBtn = document.getElementById('refresh-btn');
        const openNewTabBtn = document.getElementById('open-new-tab');
        const mobileToggleBtn = document.getElementById('mobile-toggle-btn');
        const viewportContainer = document.getElementById('viewport-container');

        let activeProjectId = null;
        let isMobileMode = false;

        function init() {
            menuData.forEach((category, index) => {
                // Create category header
                const catHeader = document.createElement('div');
                catHeader.className = `category-header px-4 py-3 flex items-center justify-between cursor-pointer hover:bg-gray-50 border-b border-gray-50 transition-colors expanded`;
                catHeader.innerHTML = `
                    <div class="flex items-center gap-3">
                        <span class="text-lg">${category.icon}</span>
                        <span class="text-xs font-bold text-gray-500 uppercase tracking-wider">${category.name}</span>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 transition-transform duration-200"><polyline points="6 9 12 15 18 9"/></svg>
                `;

                // Create submenu container
                const submenu = document.createElement('div');
                submenu.className = `submenu open`;
                
                category.children.forEach(project => {
                    const item = document.createElement('div');
                    item.className = 'sidebar-item px-10 py-2.5 cursor-pointer hover:bg-blue-50/50 flex items-center gap-3 transition-all group';
                    item.dataset.id = project.id;
                    item.innerHTML = `
                        <span class="text-base group-hover:scale-110 transition-transform">${project.icon}</span>
                        <div class="flex flex-col">
                            <span class="text-sm text-gray-600 project-name">${project.name}</span>
                        </div>
                    `;
                    item.onclick = (e) => {
                        e.stopPropagation();
                        switchProject(project);
                    };
                    submenu.appendChild(item);
                });

                catHeader.onclick = () => {
                    catHeader.classList.toggle('expanded');
                    submenu.classList.toggle('open');
                };

                sidebar.appendChild(catHeader);
                sidebar.appendChild(submenu);
            });

            refreshBtn.onclick = () => {
                if (activeProjectId) {
                    const project = findProjectById(activeProjectId);
                    if (project) iframe.src = project.url + '?t=' + Date.now();
                }
            };

            mobileToggleBtn.onclick = () => {
                isMobileMode = !isMobileMode;
                viewportContainer.classList.toggle('mobile-mode', isMobileMode);
                mobileToggleBtn.classList.toggle('text-blue-600', isMobileMode);
                mobileToggleBtn.classList.toggle('bg-white', isMobileMode);
                mobileToggleBtn.classList.toggle('shadow-sm', isMobileMode);
            };

            openNewTabBtn.onclick = () => {
                if (activeProjectId) {
                    const project = findProjectById(activeProjectId);
                    if (project) window.open(project.url, '_blank');
                }
            };
        }

        function findProjectById(id) {
            for (const cat of menuData) {
                const p = cat.children.find(child => child.id === id);
                if (p) return p;
            }
            return null;
        }

        function switchProject(project) {
            activeProjectId = project.id;
            
            // Update UI
            document.querySelectorAll('.sidebar-item').forEach(el => {
                el.classList.toggle('active', el.dataset.id === project.id);
            });

            welcomeScreen.classList.add('hidden');
            currentProjectName.innerText = project.name;
            currentProjectIcon.innerText = project.icon;
            currentProjectPath.innerText = project.path;
            
            const typeLabels = {
                'vite': { text: 'Dev Server', class: 'bg-blue-100 text-blue-600' },
                'nextjs': { text: 'Next.js', class: 'bg-purple-100 text-purple-600' },
                'node': { text: 'Node.js', class: 'bg-orange-100 text-orange-600' },
                'static': { text: 'Static', class: 'bg-green-100 text-green-600' }
            };

            const label = typeLabels[project.type] || typeLabels.static;
            typeTag.innerText = label.text;
            typeTag.className = `px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-tight ${label.class}`;
            typeTag.classList.remove('hidden');

            // Load Project
            iframe.src = project.url;
        }

        init();
    </script>
</body>
</html>
